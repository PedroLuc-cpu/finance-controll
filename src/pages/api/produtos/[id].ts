import { NextApiRequest, NextApiResponse } from "next";
import { Produto } from "@/model/produtos";
import { getServerSession } from "next-auth";
import { authOptions } from "../auth/[...nextauth]";

const produtos: Produto[] = [
  {
    id: "1",
    nome: "Leite Integral",
    descricao: "Leite integral pasteurizado, 1 litro.",
    categoria: "Alimentos e Bebidas",
    codigoBarras: "7891234567890",
    marca: "LeiteBom",
    ncm: "04012010",
    cfop: "5102",
    origem: "0",
    aliquotaICMS: 18,
    aliquotaPIS: 1.65,
    aliquotaCOFINS: 7.6,
    fornecedor: {
      nome: "Fazenda Bom Leite Ltda",
      cnpj: "12.345.678/0001-90",
      endereco: "Estrada Fazenda, KM 5, Interior",
      telefone: "(99) 99999-9999",
    },
    unidadeMedida: "litro",
    quantidadeEstoque: 0,
    precoCusto: 2.5,
    precoVenda: 4.0,
    dataValidade: new Date("2024-01-15"),
  },
  {
    id: "2",
    nome: "Shampoo para Cabelos Secos",
    descricao: "Shampoo hidratante para cabelos secos, 300 ml.",
    categoria: "Cosméticos",
    codigoBarras: "7890987654321",
    marca: "CabeloMacio",
    ncm: "33051000",
    cfop: "5102",
    origem: "0",
    aliquotaICMS: 18,
    aliquotaPIS: 1.65,
    aliquotaCOFINS: 7.6,
    registroANVISA: "25351.123456/2023-11",
    fornecedor: {
      nome: "Cosméticos Brasil Ltda",
      cnpj: "98.765.432/0001-20",
      endereco: "Av. Cosméticos, 123, São Paulo, SP",
      telefone: "(11) 5555-5555",
    },
    unidadeMedida: "ml",
    quantidadeEstoque: 1000,
    precoCusto: 5.5,
    precoVenda: 9.9,
  },
  {
    id: "3",
    nome: "Geladeira Frost Free 300L",
    descricao: "Geladeira Frost Free, capacidade de 300 litros.",
    categoria: "Eletrodomésticos",
    codigoBarras: "7895678901234",
    marca: "FrioBom",
    ncm: "84182100",
    cfop: "5102",
    origem: "0",
    aliquotaICMS: 12,
    aliquotaPIS: 1.65,
    aliquotaCOFINS: 7.6,
    certificadoINMETRO: "1234567890",
    fornecedor: {
      nome: "Eletro Industrial S/A",
      cnpj: "56.789.012/0001-34",
      endereco: "Rua dos Eletros, 456, Manaus, AM",
      telefone: "(92) 8888-8888",
    },
    unidadeMedida: "unidade",
    quantidadeEstoque: 150,
    precoCusto: 1200.0,
    precoVenda: 1800.0,
    pesoBruto: 80,
    dimensoes: {
      altura: 180,
      largura: 70,
      profundidade: 60,
    },
  },
  {
    id: "4",
    nome: "Café Moído 500g",
    descricao: "Café moído, pacote de 500g.",
    categoria: "Alimentos e Bebidas",
    codigoBarras: "7894561237890",
    marca: "CaféBom",
    ncm: "09011110",
    cfop: "5102",
    origem: "0",
    aliquotaICMS: 18,
    aliquotaPIS: 1.65,
    aliquotaCOFINS: 7.6,
    fornecedor: {
      nome: "Café Brasil Ltda",
      cnpj: "23.456.789/0001-55",
      endereco: "Estrada do Café, KM 12, Interior",
      telefone: "(11) 7777-7777",
    },
    unidadeMedida: "gramas",
    quantidadeEstoque: 1000,
    precoCusto: 4.5,
    precoVenda: 7.0,
  },
  {
    id: "5",
    nome: "Televisor LED 50 polegadas",
    descricao: "TV LED 50', resolução 4K.",
    categoria: "Eletrônicos",
    codigoBarras: "7899876543210",
    marca: "ViuTudo",
    ncm: "85287200",
    cfop: "5102",
    origem: "1",
    aliquotaICMS: 12,
    aliquotaPIS: 1.65,
    aliquotaCOFINS: 7.6,
    fornecedor: {
      nome: "Eletrônica Brasil S/A",
      cnpj: "12.789.654/0001-22",
      endereco: "Av. Eletrônica, 321, São Paulo, SP",
      telefone: "(11) 6666-6666",
    },
    unidadeMedida: "unidade",
    quantidadeEstoque: 200,
    precoCusto: 2000.0,
    precoVenda: 2500.0,
    pesoBruto: 25,
    dimensoes: {
      altura: 70,
      largura: 120,
      profundidade: 10,
    },
  },
  {
    id: "6",
    nome: "Farinha de Trigo 1kg",
    descricao: "Farinha de trigo, pacote de 1kg.",
    categoria: "Alimentos e Bebidas",
    codigoBarras: "7896547891234",
    marca: "TrigoFino",
    ncm: "11010010",
    cfop: "5102",
    origem: "0",
    aliquotaICMS: 18,
    aliquotaPIS: 1.65,
    aliquotaCOFINS: 7.6,
    fornecedor: {
      nome: "Moinho Real Ltda",
      cnpj: "34.567.890/0001-77",
      endereco: "Rod. dos Moinhos, KM 10, Interior",
      telefone: "(21) 8888-9999",
    },
    unidadeMedida: "kg",
    quantidadeEstoque: 5000,
    precoCusto: 2.0,
    precoVenda: 3.5,
  },
  {
    id: "7",
    nome: "Sabão em Pó 2kg",
    descricao: "Sabão em pó para roupas, pacote de 2kg.",
    categoria: "Limpeza",
    codigoBarras: "7893216549870",
    marca: "LimpaTudo",
    ncm: "34022000",
    cfop: "5102",
    origem: "0",
    aliquotaICMS: 18,
    aliquotaPIS: 1.65,
    aliquotaCOFINS: 7.6,
    fornecedor: {
      nome: "Indústria de Sabão Ltda",
      cnpj: "45.678.910/0001-12",
      endereco: "Rua das Indústrias, 789, Rio de Janeiro, RJ",
      telefone: "(21) 1234-5678",
    },
    unidadeMedida: "kg",
    quantidadeEstoque: 800,
    precoCusto: 5.0,
    precoVenda: 8.0,
  },
  {
    id: "8",
    nome: "Álcool Gel 500ml",
    descricao: "Álcool gel 70%, embalagem de 500ml.",
    categoria: "Saúde",
    codigoBarras: "7891472583690",
    marca: "ProtegeMais",
    ncm: "38089419",
    cfop: "5102",
    origem: "0",
    aliquotaICMS: 18,
    aliquotaPIS: 1.65,
    aliquotaCOFINS: 7.6,
    registroANVISA: "25351.678901/2023-10",
    fornecedor: {
      nome: "Higiene Brasil Ltda",
      cnpj: "11.222.333/0001-44",
      endereco: "Av. Saúde, 123, São Paulo, SP",
      telefone: "(11) 2222-3333",
    },
    unidadeMedida: "ml",
    quantidadeEstoque: 2000,
    precoCusto: 3.0,
    precoVenda: 5.5,
  },
  {
    id: "9",
    nome: "Cadeira de Escritório",
    descricao: "Cadeira ergonômica para escritório com regulagem de altura.",
    categoria: "Móveis",
    codigoBarras: "7892581479630",
    marca: "ConfortoPro",
    ncm: "94033000",
    cfop: "5102",
    origem: "0",
    aliquotaICMS: 12,
    aliquotaPIS: 1.65,
    aliquotaCOFINS: 7.6,
    fornecedor: {
      nome: "Móveis Brasil Ltda",
      cnpj: "98.765.432/0001-65",
      endereco: "Rua dos Móveis, 321, São Paulo, SP",
      telefone: "(11) 4444-5555",
    },
    unidadeMedida: "unidade",
    quantidadeEstoque: 300,
    precoCusto: 200.0,
    precoVenda: 350.0,
    pesoBruto: 15,
    dimensoes: {
      altura: 110,
      largura: 60,
      profundidade: 60,
    },
  },
  {
    id: "10",
    nome: "Aspirador de Pó 1200W",
    descricao: "Aspirador de pó portátil, 1200W de potência.",
    categoria: "Eletrodomésticos",
    codigoBarras: "7899638527410",
    marca: "CasaLimpa",
    ncm: "85081900",
    cfop: "5102",
    origem: "0",
    aliquotaICMS: 12,
    aliquotaPIS: 1.65,
    aliquotaCOFINS: 7.6,
    fornecedor: {
      nome: "Eletrodomésticos Brasil Ltda",
      cnpj: "23.654.789/0001-89",
      endereco: "Av. Domésticos, 654, São Paulo, SP",
      telefone: "(11) 5555-6666",
    },
    unidadeMedida: "unidade",
    quantidadeEstoque: 100,
    precoCusto: 150.0,
    precoVenda: 250.0,
    pesoBruto: 5,
    dimensoes: {
      altura: 40,
      largura: 30,
      profundidade: 20,
    },
  },
];

export default async function handle(
  req: NextApiRequest,
  res: NextApiResponse<Produto | { message: string }>
) {
  const session = await getServerSession(req, res, authOptions);

  const { id } = req.query;

  if (session) {
    if (req.method === "GET") {
      const produto = produtos.find((prod) => prod.id === id);

      if (produto) {
        return res.status(200).json(produto);
      } else {
        return res.status(404).json({ message: "Not Found" });
      }
    } else {
      return res.status(405).json({ message: "Método não permitido" });
    }
  } else {
    res.send({
      message:
        "Você deve estar conectado para visualizar o conteúdo protegido nesta página.",
    });
  }
}
